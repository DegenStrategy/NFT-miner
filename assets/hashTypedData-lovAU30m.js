import{c8 as p,c6 as b,bP as x,bI as d,cm as c,cF as g,cH as D,bp as f,c9 as u}from"./index-C7nnFmID.js";const P=`Ethereum Signed Message:
`;function l(n){const t=typeof n=="string"?p(n):typeof n.raw=="string"?n.raw:b(n.raw),e=p(`${P}${x(t)}`);return d([e,t])}function H(n,t){return c(l(n),t)}function M(n){const{domain:t={},message:e,primaryType:r}=n,s={EIP712Domain:g({domain:t}),...n.types};D({domain:t,message:e,primaryType:r,types:s});const a=["0x1901"];return t&&a.push(I({domain:t,types:s})),r!=="EIP712Domain"&&a.push(y({data:e,primaryType:r,types:s})),c(d(a))}function I({domain:n,types:t}){return y({data:n,primaryType:"EIP712Domain",types:t})}function y({data:n,primaryType:t,types:e}){const r=h({data:n,primaryType:t,types:e});return c(r)}function h({data:n,primaryType:t,types:e}){const r=[{type:"bytes32"}],s=[$({primaryType:t,types:e})];for(const a of e[t]){const[o,i]=T({types:e,name:a.name,type:a.type,value:n[a.name]});r.push(o),s.push(i)}return f(r,s)}function $({primaryType:n,types:t}){const e=u(w({primaryType:n,types:t}));return c(e)}function w({primaryType:n,types:t}){let e="";const r=m({primaryType:n,types:t});r.delete(n);const s=[n,...Array.from(r).sort()];for(const a of s)e+=`${a}(${t[a].map(({name:o,type:i})=>`${i} ${o}`).join(",")})`;return e}function m({primaryType:n,types:t},e=new Set){const s=n.match(/^\w*/u)?.[0];if(e.has(s)||t[s]===void 0)return e;e.add(s);for(const a of t[s])m({primaryType:a.type,types:t},e);return e}function T({types:n,name:t,type:e,value:r}){if(n[e]!==void 0)return[{type:"bytes32"},c(h({data:r,primaryType:e,types:n}))];if(e==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},c(r)];if(e==="string")return[{type:"bytes32"},c(u(r))];if(e.lastIndexOf("]")===e.length-1){const s=e.slice(0,e.lastIndexOf("[")),a=r.map(o=>T({name:t,type:s,types:n,value:o}));return[{type:"bytes32"},c(f(a.map(([o])=>o),a.map(([,o])=>o)))]}return[{type:e},r]}export{I as a,y as b,M as c,H as h,P as p,l as t};
